\subsection{Measure and Measurable Functions}
First of all, why should we discuss measure theory. It's for a better integration theory than the usual Riemann integral. Because we need strong conditions for arguments like:
\begin{equation*}
    \lim_{n} \int f_{n} = \int \lim_{n} f_{n}
\end{equation*}
to hold for Riemann integral.

Integration provides a tool to analyse things we are interested in, for example, we can control \(P\pqty{X > \epsilon}\) by the integration/moment of \(X\). 

\yellow{TBA: Relationship with Riemann Integral} We'll talk about
\begin{enumerate}
    \item Measure space, construction of measure, Lebesgue measures;
    \item Integration
    \item Convergence concepts 
    \item Differentiation 
\end{enumerate}

Let's start with an abstract measure space. Let \(\Omega\) be a space. A \(\sigma\)-algebra \(\mathcal{F}\) is a collection of subsets called \key{measurable sets} of \(\Omega\) such that it's closed under complements and countable unions. Also the \(\emptyset \in \mathcal{F}\). We can assign \key{measure} \(\mu\) to members in \(\mathcal{F}\). The reason we need to restrict attention from the power set to \(\mathcal{F}\) is that there are examples that violate some properties we want a measure to have. \(\mu\) satisfies:
\begin{equation*}
    \mu\pqty{\emptyset} = 0 \qq{and} \mu \pqty{\sqcup_{i}^{\infty} A_{i}} = \sum_{i} \mu(A_{i}) \qq{for} (A_{i}) \subset \mathcal{F}
\end{equation*}
The triplet \((\Omega, \mathcal{F}, \mu)\) is called a \key{measure space}.  

A \key{measurable function} is \(X : (\Omega, \mathcal{F}, \mu) \to \pqty{Y, \mathcal{H}}\) such that for all \(H \in \mathcal{H}\), \(X^{-1}(H) \in \mathcal{F}\). Meaning that we can assign a measure to the subsets of \(\mathcal{H}\) based on the measure \(\mu\) and \(X\). 
Given two measurable spaces, we can check whether a function \(X\) is measurable. 

\begin{lemma}
    Suppose \(\mathcal{H} = \sigma(\mathcal{G})\), if for all \(B \in \mathcal{G}\), \(X^{-1} (B) \in \mathcal{F}\), then \(X \) is measurable. 
\end{lemma}
\begin{proof}
    Let \(\mathcal{H}' = \Bqty{B\subset S\mid X^{-1}(B) \in \mathcal{F}}\), then we can show \(\mathcal{H}'\) is a \(\sigma\)-algebra because \(X^{-1}\) preserves complements and union. Then we have \(\mathcal{G} \subset \sigma(\mathcal{G}) = \mathcal{H} \subset \mathcal{H}'\), meaning that all \(H\in \mathcal{H}\) satisfies the condition.
\end{proof}

There are useful lemmas for checking a collection of subsets is indeed a \(\sigma\)-algebra. 

We say \(\mathcal{P}\) is a \(\pi\)-system, if \(A,B\in \mathcal{P}\) implies \(A\cap B \in \mathcal{P}\). \(\mathcal{L}\) is a \(\lambda\)-system if \begin{enumerate*} 
    \item \(\Omega\in \mathcal{L}\)
    \item \(A,B \in \mathcal{L}\) and \(A\subset B\) will imply \(A - B \in \mathcal{L}\)
    \item If \(A_{n}\in \mathcal{L}, A_{n}\uparrow A\), then \(A\in \mathcal{L}\).
\end{enumerate*} 

\begin{lemma}[Dykin's \(\pi-\lambda\)]
    If a \(p\)-system \(\mathcal{P}\) is contained in a \(\lambda\)-system \(\mathcal{D}\), then \(\sigma\pqty{\mathcal{P}} \subset \mathcal{D}\).
\end{lemma}

\begin{lemma}[Monotone Class Theorem]
    A collection of subsets \(\mathcal{M}\) is a \key{monotone class}  if \((A_{n})\subset \mathcal{A}\)
    \begin{enumerate}
        \item \(A_{n} \uparrow A\) implies \(A \in \mathcal{A}\).
        \item \(A_{n} \downarrow A\) implies \(A \in \mathcal{A}\). 
    \end{enumerate}
    The monotone class generated by an algebra \(\mathcal{A}\), \(\mathcal{M}(\mathcal{A}) = \sigma\pqty{\mathcal{A}}\). 
\end{lemma}

A very useful property of the topology on \(\mathbb{R}\) is the following. 
\begin{thm}[Open Sets on \(\mathbb{R}\)]
    Every open set \(U \subset \mathbb{R}\) is an at most countable union of disjoint open intervals. 
\end{thm}
\begin{proof}
    Equivalence argument: if \(x,y \in U\), \(x \sim y\) if there exists an open interval \(I_{x}\) containing \(x,y\). \(U / \sim\) is a set of disjoint open intervals and each contains a different rational \(q\), so it's at most countable. 
\end{proof}

\begin{thm}[Measurability]
    For countable collections of random variables \(X_{n}, Y_{n}\), \(X +Y, XY\) and \(\sup X_{n}\), \( \inf X_{n}\), \( \limsup X_{n}\), \( \liminf X_{n}\) are measurable. If \(\lim_{n} X_{n}\) exists, it's also measurable.
\end{thm}

\begin{proof}
    \(+, *\) are continuous in the topological vector space \(\mathbb{R}, \mathbb{C}\). 
    For \(\sup_{n} X_{n}\), let \(t \in \mathbb{R}\), \(\sup_{n} X_{n} \in (-\infty, t) \iff X_{n} < t\), for all \(t\), hence \((\sup_{n} X_{n})^{-1}(-\infty, t) = \cap_{n} X_{n} ^{-1} (- \infty, t)\).    
\end{proof}

\division{Probability Space and Random Variables}

A measure space is a \key{probability space} if \(\mu =1\), we write it as \((\Omega, \mathcal{F}, P)\). A random variable/vector is a measurable function on probability space \(X: \Omega \to \mathbb{R}/\mathbb{R}^{d}/\mathbb{C}\) with the Borel \(\sigma\)-algebra, the \(\sigma\)-algebra generated by the open sets.

\subsection{Construction of Measures}

\division{Motivation}

Now we want to show that we can actually find measure on \(\mathbb{R}\) and \(\mathbb{R}^{d}\) that are the most useful spaces. We start from abstract construction method inspired by the following observation of measure on \(\mathbb{R}\).

In order to have a natural measure \(\lambda\) on \(\mathbb{R}\), we want the following properties:
\begin{enumerate}
    \item \(\lambda_{0} \linterval{a}{b} = b - a \);
    \item Measure of union of disjoint intervals should be the sum;(we can't have uncountable sum, hence restricted to countable union)
    \item Apply to all intervals(we can't apply to the power set, hence restrict to the measurable sets).
\end{enumerate}

Now consider the set \(\mathcal{S}_{\mathbb{R}} = \Bqty{\linterval{a}{b} : a\leq b \in \mathbb{R}}\), it's too small, we want to extend the natural measure funtion \(\lambda_{0}\) to a larger set(we can extend to \(\mathcal{B}_{\mathbb{R}}\), even to \(\mathcal{L}_{\mathbb{R}}\)). It can be shown that \(\mathcal{B} = \sigma \pqty{\mathcal{S}}\). 


\division{Construction of Abstract Measure}

We follow the steps of extensions
\begin{equation*}
    (\mathcal{S}, \mu_{0}) \to (\mathcal{A}, \mu_{1}) \to (\mathcal{M}, \mu^{*}) \to (\mathcal{B}, \mu)
\end{equation*}

\key{Semi-algebra} \(\mathcal{S}\) is collection of subsets of a space \(\Omega\) that satisfies the following conditions: closed under intersection and the complements are union of finite disjoint sets in \(\mathcal{S}\). Let \(\mu_{0}\) be a what I call \key{semi-pre-measure} be a set function on \(\mathcal{S}\) such that if \(S_{N} = \sqcup^{N}S_{j}, S_{\infty} = \sqcup^{\infty}S_{j} \in \mathcal{S}\), then
\begin{equation*}
    \mu_{0}(\emptyset) = 0 ; \quad \mu_{0}\pqty{S_{N}} = \sum^{N} \mu_{0}S_{j}; \quad  \mu_{0}\pqty{S_{\infty}} \leq \sum^{\infty} \mu_{0}S_{j}
\end{equation*} 

There is a unique extension of \(\mu_{0}\) to a \key{premeasure} on the \key{algebra} \(\mathcal{A}\) generated by \(\mathcal{S}\), that is the finite disjoint union of members of \(\mathcal{S}\), satisfying 
\begin{equation*}
    \mu_{1}\pqty{\emptyset} = 0; \quad \mu_{1}\pqty{\sqcup_{j} A_{j}} = \sum_{j} \mu_{1}\pqty{A_{j}}
\end{equation*}
if \(\sqcup_{j}^{\infty} A_{j} \in \mathcal{A}\). 



\begin{thm}[\( (\mathcal{S}, \mu_{0}) \to (\mathcal{A}, \mu_{1}) \)]
    We have that \(\mathcal{A} = \Bqty{\bigsqcup^{N}_{j} S_{j} : S_{j} \in \mathcal{S}}\) is an algebra. And \(\mu_{1}(A) = \sum^{N}_{j} \mu_{0} S_{j}\) is a premeasure. 
\end{thm}

\begin{proof}
    \(\mu_{1}(\emptyset) = 0\). Suppose \(A = \bigsqcup^{\infty} A_{i} \in \mathcal{A}\), then \red{there exists} \(T_{l}\in \mathcal{S}: l = 1,\dots N_T\), such that \(A = \sqcup_{l} T_{l}\), also for each \(A_{j} = \sqcup^{N_{j}}_{k} S_{j,k}\). 
\end{proof}

Let an \key{outer measure} be a function over the power set such that:
\begin{equation*}
    \mu^{*}(\emptyset)= 0 \qq{and} \mu^{*}\pqty{\sqcup^{\infty} A_{j}}\leq \sum_{j} \mu^{*} A_{j} \qq{and} \mu^{*}(A) \leq \mu^{*}(B)  \qq{for} A \subset B
\end{equation*}

Also let \(\mathcal{M}\) be the \key{outer-measurable sets}, that is the collections of \(A\) such that 
\begin{equation*}
    \mu^{*} (E) = \mu^{*}(E\cap A) + \mu^{*} (E\cap A^{c}) \qq{for all} E \subset X
\end{equation*}

\begin{thm}[\((\mathcal{A}, \mu_{1}) \to (\mathcal{M}, \mu^{*})\) Caratheodory's Theorem applied to premeasures]
    We can find the outer measure induced by \(\mu_{1}\): 
    \begin{equation*}
        \mu^{*}_{1}(B) = \inf\Bqty{\sum^{\infty}_{j} \mu_{1} A_{j}: B \subset \cup_{j}A_{j}}
    \end{equation*}
    we show \(\mu^{*}_{1}\) is indeed an outer measure, Caratheodory states that for outer measures, \(\mathcal{M}\) of \(\mu^{*}_{1}\) is a \(\sigma\)-algebra and \(\mu^{*}|_{\mathcal{M}}\) is complete. 
\end{thm}
\begin{proof}
    \begin{summary}[1]
        Monotone property is easy, for countable subadditivity, we use \(\epsilon\)-room method, find a cover \(C_{jk}\) of \(A_{j}\) such that :
        \begin{equation*}
            \mu^{*}_{1}(A_{j}) > \sum_{k} \mu^{*}_{1}C_{jk} - \epsilon
        \end{equation*}
    \end{summary}
    \begin{summary}[2]
        To show that \(\mathcal{M}\) is a \(\sigma\)-algebra we only need to show that for \(E_{j} \in \mathcal{M}\) and any \(B \subset \Omega\), we have:
        \begin{equation*}
            \mu^{*} (B ) \geq \mu^{*} \pqty{B \cap E} + \mu^{*} \pqty{B \cap E}
        \end{equation*}
        which can be seen by considering finite sum, taking out one \(E_{j}\) at a time and then take limit. 
    \end{summary}
    \begin{summary}[3]
        Show that the restriction is complete.
    \end{summary}
\end{proof}

\begin{remark}
    As a result, there exists an extension of a premeasure on \(\mathcal{A}\) to a complete measure on \(\sigma(\mathcal{A})\), and if the premeasure is \(\sigma\)-finite, then the extension is unique. 
\end{remark}

\begin{thm}[\((\mathcal{M}, \mu^{*}) \to (\sigma(\mathcal{S}), \mu)\)]
    We can restrict \(\mu^{*}\) to define \(\mu= \mu^{*}|_{\sigma\pqty{\mathcal{S}}}\), and the resulting measure is complete. 
\end{thm}

\begin{proof}
    We show that \(\sigma\pqty{\mathcal{S}}\subset \mathcal{M}\) and the restriction is complete. 
\end{proof}

\subsection{Borel and Lebesgue-Stietjes Measure on \tmath{\mathbb{R}}}

We verify that for any nondecreasing right-continuous function \(F: \mathbb{R}\to \mathbb{R}\), the semi-algebra \(\mathcal{S}_{\mathbb{R}}\) together with the semi-pre-measure defined by 
\begin{equation*}
    \lambda_{0} \linterval{a}{b} = F(b) - F(a)
\end{equation*}
satisfies the conditions set in the previous section. Let \(\mathcal{A}_{\mathbb{R}}\) be the algebra generated by \(\mathcal{S}_{\mathbb{R}}\) in turn will generate \(\mathcal{B}_{\mathbb{R}}\). We can extend it to a something larger, a complete measure whose domain contains \(\mathcal{B}_{\mathbb{R}}\). It will be called the \key{Lebesgue-Stietjes measure} and \key{Lebesgue measurable sets} \(\mathcal{M}_{\lambda}\). The restriction on \(\mathcal{B}\) is called \key{Borel measure}. It's the \key{completion} of \(\mathcal{B}\).

A measure space is \key{complete} if for all \(E\subset N\) where \(\mu\pqty{N}=0\), \(E\subset \mathcal{F}\). A completion of of \(\mathcal{F}\), denoted \(\bar{\mathcal{F}}\) will be 
\begin{equation*}
    \bar{\mathcal{F}} = \Bqty{E \cup F: F\in \mathcal{F}, E\subset N, \mu(N) = 0}
\end{equation*}

\division{Regularity of Lebesgue Measurable Sets}

\begin{thm}[Regularity of \(\mathcal{M}_{\lambda}\)]
    Lebesgue measurable sets are of simple form if you allow for a small error.

    \begin{enumerate}
        \item \(\lambda(A) = \inf\Bqty{\lambda U:  A \subset U, U  \text{ is open}} = \sup\Bqty{\lambda K : K \subset A, K \text{ is compact}}\)
        \item \(A = G_{\delta} \setminus N_{1}= F_{\sigma} \cup N_{2}\) where \(N\) are null sets.  
        \item Littlewood's First Principle: Suppose \(\lambda(A) < \infty\) then for all \(\epsilon > 0\), there exists \(B\) that is a finite union of open intervals such that \(A \triangle B < \epsilon\). 
    \end{enumerate}
\end{thm}
\begin{proof}
    
\end{proof}
\begin{remark}
    As a result, \(\mathcal{L} \subset \bar{\mathcal{B}}\). 
\end{remark}

\subsection{Integration}

\division{Definition}

Integration and measure are the two sides of same coin: integration is the extension of measure from the space of \key{indicator functions} \(\mathbf{1}_{A}\) of measurable sets to a larger set of functions. 

For \key{simple functions} \(f_{s} = \sum^{N}_{j} \mathbf{1}_{A_{j}}\), we can define \(\mu f_{s} = \sum^{N}_{j} \mu(A_{j})\)


Then for \key{nonnegative measurable} functions \(f\), we can define 
\begin{equation*}
    \mu f = \sup \Bqty{\mu f_{s} : f_{s} \leq f \quad \text{pointwise}}
\end{equation*}

If \(f = f^{+} - f^{-}\) and the integrals of two nonnegative parts are not \(\infty\), then we say \(f\) is \key{integrable} or in \({L}^{1}\) and \(\mu f = \mu f^{+} - \mu f^{-}\).  

\division{Characterisations of Integral}

\begin{thm}[Properties of Integral]
    \begin{enumerate}
        \item Monotone \(\mu f \leq \mu g\) if \(f \leq g\) pointwise.
        \item Linearity for \(a > 0\), \(\mu (af) = a \mu f\), \(\mu(f + g)=  \mu f + \mu g\).
        \item Monoton Convergence: if \(0 \leq f_{n} \uparrow f\) a.e., then \(\mu f_{n} \uparrow \mu f\). 
    \end{enumerate}
\end{thm}
\begin{proof}
    Folland proves by choosing simple function and a scaling factor \(\alpha\). Tao's proof is essentially the same.
    PTE proves via Fatou's lemma. 
    \begin{itemize}
    \item
    Suppose \(f_{n}\uparrow f\) a.e., if \(\mu f\) exists, we know \(\mu f_{n}\) must converge because it's a nondecreasing bounded sequence of numbers. Also \(\mu f_{n} \leq \mu f\) by monotonicity. 
    \item Suppose \(f_{n}\) are indicator functions \(f_{n} = \indicator{A_{n}}\), then \(f_{n} \uparrow f\) implies that \(A_{n}\) is an increasing sequence of sets and \(f = \indicator{\cup A_{n}}\), it follows from countable additivity of measure(continuity from below). 
    \item
    To show that \(\mu f \leq \lim_{n} \mu f_{n}\), where \(\mu f = \sup \Bqty{\mu g: g \text{ is simple}, g \leq f}\), we only need to show that for all simple \(g \leq f\), we have \(\mu g \leq \lim \mu f_{n}\). We can use \(\epsilon\)-room method, for any \(g\) simple, let \(E_{n} = \Bqty{\omega: f_{n}(\omega) \geq (1 - \epsilon) g(\omega)}\), \(E_{n} \uparrow \Omega\), and we have \(\int f_{n} \geq \int_{E_{n}} (1 - \epsilon)g\), taking \(\lim\) , we have \(\lim \int f_{n} \geq (1 - \epsilon) \int g\) for all \(\epsilon> 0\). 
    \item For the last assertion we can simply show a simple function induces a new measure. 
    \end{itemize}
\end{proof}

\begin{remark}
    Let \(g\) be a simple function, \(\mu_{g}(A) = \int_{A} g \dd{\mu} \) defines a measure \(\rightarrow\) Monotone convergence \(\rightarrow\) for any \(f \in \mathcal{F}^{+}\), \(\mu_{f}\) defines a measure. Later we will show by Radon-Nikodym that \(L^{1}\) functions are related to signed measures.
\end{remark}

\division{Regularity of Integrable Functions}

\begin{thm}[Littlewood's Second Principle]
    Measurable and integrable functions can be approximated by simple well-behaved functions.   
\end{thm}
\begin{thm}[Lusin's Theorem]
    
\end{thm}

\begin{remark}
    These three properties fully characterise the integral. That is given a functional that satisfies the three properties we can find a measure for which the function is the integral. 
\end{remark}

\division{Integral Inequalities}

\begin{thm}[Inequalities and Controls]
    Useful inequalities and controls, suppose that \(f \in L^{1}\);
    \begin{enumerate}
        \item Jensen's inequality: suppose we have a convex function \(\Phi(x): (a,b) \to \mathbb{R}\), suppose \(\mu(\Omega)=1\), and \(f \in L^{1}: \Omega \to (a,b) \) then \(\mu\pqty{\Phi(f)} \geq \Phi \mu f\)
        \item Holder's inequality. Suppose \(1 \leq p \leq \infty\) For \(q: \frac{1}{p} + \frac{1}{q} = 1\) and \(f,g\) being measurable, we have \(\norm{fg}_{1} \leq \norm{f}_{p} \norm{g}_{q}\) with equality iff \(\alpha, \beta \neq 0\), \(\alpha \abs{f}^{p} = \beta \abs{g}^{q}\) a.e. 
        \item Minkowski's inequality: \(\norm{f + g}_{p} \leq \norm{f}_{p} + \norm{g}_{p}\).
        \item Chebyshev's Inequality: 
        \item For nonnegative measurable functions, \(\mu f < \infty  \implies f < \infty\) a.e., \(\mu f = 0\) implies \(f = 0\) a.e. 
        \item \yellow{Moment and tail behaviour}, if \(\mu\) is finite, 
        \begin{equation*}
            \mu f^{r} < \infty \implies \sum x^{r - 1} \mu(f> x) < \infty
        \end{equation*}
    \end{enumerate}    
\end{thm}

\begin{proof}
    We prove the above inequalities. 
    \begin{enumerate}
        \item First we show that if \(\Phi\) is convex and \(t_{0}\in (a,b)\) then there exists \(\beta\) such that \(F(t) - F(t_{0}) \geq \beta(t-t_{0})\) for all \( t \in (a,b)\).  Second \(\Phi\) is measurable, because for any \(t\), \(\Phi^{-1} ({x: x < t})\) is an interval. 
            
        \item Suppose \(\norm{f}_{p} = 0\), then \(f = 0, a.e.\), then LHS is also \(0\). If \(\norm{f}_{p} = \infty\) then it obviously is true. Then one proof is based on the lemma:
        \begin{lemma}
            If \(a,b \geq 0\) and \(0 < \lambda <1\) then 
            \begin{equation*}
                a^{\lambda} b^{1-\lambda} \leq \lambda a +(1-\lambda) b
            \end{equation*}
            with equality iff \(a = b\). 
        \end{lemma}
    \end{enumerate}
\end{proof}


\subsection{Product Space and Lebesgue Measure on \tmath{\mathbb{R}^{d}}}

\division{Product Measurable Space}    

Let \(\pqty{Y_{\alpha}, \mathcal{H}_{\alpha}}: \alpha\in \mathcal{A} \) be a collection of measurable spaces, then we can define a \key{product \(\sigma\)-algebra} \(\otimes_{\alpha} \mathcal{H}_{\alpha} = \sigma\Bqty{\pi_{\alpha}^{-1} (E_{\alpha}): E_{\alpha} \in \mathcal{H}_{\alpha}, \alpha \in \mathcal{A}}\) on the product space \(\prod_{\alpha} \Omega_{\alpha}\),  
\begin{proposition}
    Let \(\Omega, \mathcal{F}\) and \(\pqty{Y_{\alpha}, \mathcal{H}_{\alpha}}\) be measurable spaces, let \((Y, \mathcal{H}) = (\prod Y_{\alpha}, \otimes_{\alpha} \mathcal{H}_{\alpha})\). \(f : \Omega \to Y\) is \((\mathcal{F}, \mathcal{H})\)-measurable \textit{if and only if} \(f_{\alpha} = \pi_{\alpha} f\) is \(\mathcal{F} ,\mathcal{H}_{\alpha}\)-measurable for all \(\alpha\).
\end{proposition} 

\begin{proposition}
    Product \(\sigma\)-algebra is generally smaller than the \(\sigma\)-algebra on the product space itself. On separable metric space, they coincide. 
\end{proposition}

A measure space is a \key{probability space} if \(\mu =1\), we write it as \((\Omega, \mathcal{F}, P)\). A random variable/vector is a measurable function on probability space \(X: \Omega \to \mathbb{R}/\mathbb{R}^{d}/\mathbb{C}\) with the Borel \(\sigma\)-algebra, the \(\sigma\)-algebra generated by the open sets.
{}
Now consider finite vector of random variables \(X^{d} := (X_{1}, \dots,X_{d}) : \Omega \to \mathbb{R}^{d}\). Then \(X^{d}\) is measurable iff all \(X_{i}\) are measurable. 
\key{Product measurable} and \key{product measure}. 

\division{Finite Product Measure}

Let \(\pqty{\Omega_{1}, \mathcal{F}_{1}, \mu_{1}}\) and \(\pqty{\Omega_{2}, \mathcal{F}_{2} , \mu_{2}}\) be two \(\sigma\)-finite measure spaces. We can definte a \textit{semi-pre-measure} on the \key{rectangles}: \(E_{1}\times E_{2} \in \mathcal{F}_{1} \times \mathcal{F}_{2}\):
\begin{equation*}
    \tilde{\mu} \pqty{E_{1} \times E_{2}} = \mu_{1} \pqty{E_{1}} \mu_{2} \pqty{E_{2}}
\end{equation*}
we can show that the collection of rectangles \(\mathcal{S} = \mathcal{F}_{1}\times \mathcal{F}_{2}\) a semi-algebra  on \(\Omega_{1}\times \Omega_{2}\): they are closed under intersection and \(\Omega_{1} \times \Omega_{2} \in \mathcal{S}\), and \(\pqty{E_{1}\times E_{2}}^{c}\) is a finite disjoint union of members of \(\mathcal{S}\). 

The product \(\sigma\)-algebra on \(\Omega_{1}\times \Omega_{2}\) is \(\mathcal{F}_{1} \otimes \mathcal{F}_{2} = \sigma(\mathcal{S})\), if we can show that \(\tilde{\mu}\) is \(\sigma\)-additive, then we can uniquely extend it to a measure on \(\mathcal{F}_{1} \otimes \mathcal{F}_{2}\) by Caratheodory's theorem. 

\begin{thm}
    Under the assumptions above, we have a unique extension of \(\tilde{\mu}\) to a measure \(\mu\) on \(\pqty{\mathcal{F}_{1} \otimes \mathcal{F}_{2} }\). 
\end{thm}
\begin{proof}
    \begin{enumerate}
        \item as a lemma we show that for any \(A \in \mathcal{F}_{1}\otimes \mathcal{F}_{2} \), the \key{section} of \(A\) at any \(x \in \Omega_{1}\), 
        \begin{equation*}
            A_{x}:= \Bqty{y\in \Omega_{2}: (x,y) \in A}  \in \mathcal{F}_{2}
        \end{equation*}
        with \key{monotone class argument}, defining \(\mathcal{E} := \Bqty{A \in \mathcal{F}_{1} \otimes \mathcal{F}_{2} : \forall x \in\Omega_{1} , A_{x} \in \mathcal{F}_{2}}\).
        
        \item
        Then we show \(\mu\) is additive on \(\mathcal{F}_{1} \times \mathcal{F}_{2}\). Suppose \((A_{j})\) are disjoint rectangles and \( A = \sqcup_{j} A_{j} \in \mathcal{F}_{1}\times \mathcal{F}_{2}\). Let \(A_{j} = E_{j} \times F_{j}\) and \(A = E\times F\).
        
        We can show that \(A_{x} = F \mathbf{1}_{E}(x)  \) is also equal to \(\sum_{j} F_{j} \mathbf{1}_{E_{j}}(x)\) and since it's \(\mathcal{F}_{2}\)-measurable, we have \(\mu_{2}(F)\mathbf{1}_{E}(x) = \sum_{j} \mu_{2}\pqty{F_{j}} \mathbf{1}_{E_{j}}(x)\).

    This as a function of \(x\) is \(\mathcal{F}_{1}\)-measurable, because it's a simple function. Taking integral with restpect to \(\mu_{1}\) will give the result.
     
    Then we show \(\tilde{\mu}\) is also \(\sigma\)-additive by replacing the finite sum with infinite sum and use monotone convergence.
    \end{enumerate}
\end{proof}


\division{Countable Product Measure}

Let \(\pqty{\Omega_{j}, \mathcal{F}_{j}, P_{j}}_{j = 1}^{\infty}\) be a countable collection of \zhu{finite}-measure spaces, we fix \(P_{j}(\Omega_{j}) = 1\). We want to construct a measure on the product \(\sigma\)-algebra \(\otimes_{j} \mathcal{F}_{j}\) based on the set function \(\tilde{\mu}\) defined on the seim-algebra of \key{cylinder sets} \(A \in \mathcal{C}\) such that for some \(n\), 
\begin{equation*}
    A = E_{1} \times E_{2} \times \dots \times E_{n} \times \Omega_{n+1} \times \dots \qq{where} E_{k} \in \mathcal{F}_{k}
\end{equation*}
and \(\tilde{\mu}: \mathcal{C} \to \mathbb{R}_{+}\cup \Bqty{\infty}\),
\begin{equation*}
    \tilde{\mu}(A) = \prod_{j = 1}^{n} \mu_{j}\pqty{E_{j}}
\end{equation*}

\begin{thm}[Countable Product Measure]
    We can uniquely extend \(\tilde{\mu}\) to a measure on \(\otimes \mathcal{F}_{j}\). 
\end{thm}
\begin{proof}
    We need to show that 
    \begin{enumerate}
        \item \(\mathcal{C}\) is a semi-algebra.
        \item \(\tilde{\mu} \) 
    \end{enumerate}
\end{proof}


\division{Fubini-Tonelli}
\begin{thm}[\yellow{Fubini-Tonelli}]
    Suppose we have a product space \(\Omega_{1}\times \Omega_{2}\), let \(f: \Omega_{1}\times \Omega_{2} \to \mathbb{R}\) be a measurable function with respect to \(\pqty{\mathcal{F}_{1} \otimes \mathcal{F}_{2}, \mathcal{B}_{\mathbb{R}}}\). If \(\Omega_{1}, \Omega_{2}\) are \(\sigma\)-finite under \(\mu_{1}, \mu_{2}\), then
    \begin{description}
        \item[Tonelli] If \(f\geq 0\), 
    \end{description}
\end{thm}

\subsection{Convergence Concepts}

\begin{proposition}[Uniqueness of Limits]
    For different convergence modes, they agree on the limit, if exists, a.e. 
\end{proposition}


\begin{thm}[Fatou's Lemma]
    Suppose \(f_{n}\) is measurable on \(\Omega\), then we have the following inequality:
    \begin{equation*}
        \int \liminf f_{n}\leq \liminf \int f_{n} 
    \end{equation*}
\end{thm}
\begin{proof}
    Based on Monotone Convergence. Because for each fixed \(n\) and \(m \geq n\), \(\inf_{m\geq n} f_{m} \leq f_{m}\), we have \(\int \inf_{m\geq n} f_{m} \leq \int f_{m}\), then \(\int \inf_{m\geq n} f_{m} \leq \red{\inf_{m \geq n}}\int f_{m}\). The integrand on the left is an increasing sequence of functions, we apply MCT and get the result. 
\end{proof}

\begin{thm}[Dominated Convergence]
    Suppose we have measurable \(f_{n} \to f\) a.e., and a function \(g \in L^{1}\) such that \(\abs{f_{n}} < g\) a.e. \blue{for all \(n\)}, then \(\lim \int f_{n} = \int \lim f_{n}\). 
\end{thm}

\begin{proof}
    Because \(\abs{f_{n}} < g\) ,we know that \(\abs{f} < g\) as well and hence integrable.
    Apply Fatou's Lemma twice. \(\abs{f_{n} - g + g - f} \leq \abs{f_{n} - g} + \abs{g - f}\). 
    We know that \(\abs{\int f_{n} - f} \leq \int \abs{f_{n} - f} \), which is integrable because  
\end{proof}

\begin{thm}[\yellow{Integration to the limit}]
    Suppose \(f_{n} \to f\), there exists \(g(x)\) such that 
\end{thm}
\begin{proposition}[Defect version of Fatou's Lemma]
    From Tao Exercise 1.4.48, which I find interesting. \(f_{n} \to f\) where \(f_{n}, f\) are all integrable. Show that 
    \begin{equation*}
        \int f_{n} - \int f - \norm{f_{n} - f}_{L^{1}} \to 0
    \end{equation*}
\end{proposition}
\begin{proof}
    Apply dominated convergence to \(\min(f_{n}, f)\).
\end{proof}

\key{Uniform integrability} is a substitute for \key{dominance condition}. A sequence of \(f_{n} \in L^{1}\) is uniformly integrable if
\begin{enumerate}
    \item \(\sup_{n} \norm{f_{n}}_{L^{1}} < \infty\);
    \item \(\sup_{n} \norm{f_{n} \mathbf{1}(\abs{f_{n}}> M)} \to 0\) as \(M \to \infty\);
    \item \(\sup_{n} \norm{f_{n} \mathbf{1}(\abs{f_{n}}\leq \delta)} \to 0\) as \(\delta \to 0\).
\end{enumerate} 

For functions \(f_{n}: E \to \mathbb{R}\) there are a lot of ways to define \(f_{n} \to f\). 
\(f_{n} \to f\) \key{pointwise} if for each \(x \in E\), \(f_{n}(x)\) as a sequence of number converges to \(f(x)\). \(f_{n} \rightrightarrows f\) if for all \(x\), the convergence rate is bounded from below. 

With \(E\) equipped with a measure, we can have a relaxation of \key{uniform convergence}. \(f_{n} \to f\) \key{almost uniformly} if for any \(\epsilon> 0\), there exists a \(N_{\epsilon} \subset \mathcal{E}\) with measure \(< \epsilon\) such that on \(E\setminus N_{\epsilon}\), \(f_{n} \rightrightarrows f\). We have the following

We introduce \key{convergence in measure} and \key{convergence in distribution}. \(f_{n} \to f\) in measure if \(\mu\pqty{\norm{f_{n} - f(x)} > \epsilon} \to 0\) for any \(\epsilon > 0\).

Convergence in distribution has a \key{Skorokhod's representation} as independent random variables with corresponding distributions. 

We relate the convergence of sets to the sum  of measures. 
\begin{thm}[Borel-Cantelli Lemma]
    Let \(E_{1}, E_{2},\dots,E_{3}\) be a sequence of \(\mathcal{B}\)-measurable sets such that \(\sum_{n} \mu(E_{n}) < \infty\), show that \(\mu\pqty{\limsup E_{n}} = 0\). 
\end{thm}
\begin{proof}
    \(\sum \mu \pqty{E_{n}} < \infty\), meaning that \(\sum_{n > m} \mu E_{n} \to 0\) as \(m\to \infty\). Then for any \(\epsilon>0\) there exists \(m\) such that \(\mu\pqty{\limsup E_{n}} < \mu \pqty{\sup_{n>m} E_{n}} < \mu \pqty{\sum_{n>m} E_{n}} < \epsilon\). 
\end{proof}
\begin{remark}
    Borel-Cantelli is useful for stong law of large numbers which turns the statement of \(\mu\Bqty{x: \lim \abs{f_{n} - f} (x) > \epsilon} = 0\) to \(\sum_{n} \mu\pqty{x: \abs{f_{n} - f} > \epsilon} < \infty\). 
\end{remark}

\division{Borel-Cantelli's Lemmas}

\begin{thm}[Borel-Cantelli's Lemma]
    If \(\sum P(A_{n})< \infty\), then \(P\pqty{\limsup A_{n}} = P\pqty{A_{n} \text{ i.o.}} =0 \)
\end{thm}

As a result, we can upgrade convergence in probability to convergence a.s. 

\begin{thm}
    \(X_{n} \to X\) in probability iff for every subsequence of \(X_{n}\), there exists a further subsequence that converges to \(X\) almost surely. 
\end{thm}
\begin{proof}
    If \(X_{n}\to X\) in probability, then \(P\pqty{\abs{X_{n} - X} \geq \epsilon} \to 0\), for any subsequence \(X_{n(k)}\) of \(X_{n}\), we can select a further subsequence \(X_{n(k(m))}\) such that \(P \pqty{\abs{X_{n} - X} \geq \epsilon} \leq \frac{1}{m^{2}}\). By Borel-Cantelli, we know \(X_{n(k(m))} \to X\) a.s. 

    For the other direction, it's easy to show that \(X_{n} \to X\) a.s. implies \(X_{n}\to X\) in probability, then use thinning in topological space method, \autoref{method:thin-topology}. Because convergence in probability can be put in a metric.
\end{proof}
\begin{remark}
    Notice that convergence almost surely is not a convergence in a topology. 
\end{remark}

\begin{thm}[Egoroff's Theorem]
    Suppose \(f_{n} \to f\) a.e. on a finite measure space, then \(f_{n} \to f\) almost uniformly. 
\end{thm}
\begin{proof}
    Suppose \(E_{m,n} := \Bqty{x: \abs{f_{n}(x) - f(x)} > \frac{1}{m}}\). We know for fixed \(m\), \(E_{m,n} \to \emptyset\) a.e. The set \(E_{m}(k):= \Bqty{x: \sup_{n > k} \abs{f_{n}(x) - f(x)} > \frac{1}{m}} \)  
\end{proof}
\subsection{Signed Measure}

\division{Definition and Hahn-Jordan} 

We relax the assumption that measure takes only non-negative values. Let \(\Omega, \mathcal{F}\) be a measurable space, a \key{signed measure} is \begin{equation*}
    \nu: \mathcal{F} \to [-\infty,+ \infty]
\end{equation*}
such that 
\begin{equation*}
    \nu\pqty{\emptyset} = 0; \quad \nu\pqty{\bigsqcup_{j}^{\infty} E_{j}} = \sum_{j} \nu\pqty{E_{j}} 
\end{equation*}
where we always require the infinite sum is well-defined. 

\begin{thm}[Hahn-Jordan Decomposition]
    Let \(\nu\) be \(\sigma\)-finite, then there exist \(P,N\) such that \(P = N^{c}\) and for all \(E\subset P\), \(F\subset N\), \(\nu(E) \geq 0\) and \(\nu \pqty{F} \leq 0\). 
\end{thm}


\division{Radon-Nikodym}


